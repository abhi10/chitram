# Chitram Production Environment Configuration
# =============================================
# Copy this file to .env.production and fill in your values
# NEVER commit .env.production to version control!
#
# Generate secure secrets with:
#   openssl rand -base64 32  (for passwords)
#   openssl rand -base64 64  (for JWT secret)

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Debug mode - MUST be false in production
DEBUG=false

# Domain configuration (used by Caddy for SSL certificate)
DOMAIN=chitram.example.com

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================

POSTGRES_USER=chitram
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD
POSTGRES_DB=chitram

# Connection string constructed from above (internal Docker network)
# Format: postgresql+asyncpg://{user}:{password}@postgres:5432/{db}
DATABASE_URL=postgresql+asyncpg://chitram:CHANGE_ME_GENERATE_SECURE_PASSWORD@postgres:5432/chitram

# =============================================================================
# OBJECT STORAGE (MinIO)
# =============================================================================

MINIO_ROOT_USER=chitram-admin
MINIO_ROOT_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD

# App credentials (can be same as root for simple setup, or create separate user)
MINIO_ACCESS_KEY=chitram-admin
MINIO_SECRET_KEY=CHANGE_ME_GENERATE_SECURE_PASSWORD
MINIO_BUCKET=images

# Internal endpoint (Docker network)
MINIO_ENDPOINT=minio:9000
MINIO_SECURE=false

# =============================================================================
# CACHE (Redis)
# =============================================================================

# Redis password (optional but recommended)
REDIS_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD

# Internal endpoint (Docker network)
REDIS_HOST=redis
REDIS_PORT=6379

# Cache settings
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CACHE_KEY_PREFIX=chitram

# =============================================================================
# AUTHENTICATION
# =============================================================================

# JWT Secret - MUST be unique and secure!
# Generate with: openssl rand -base64 64
JWT_SECRET_KEY=CHANGE_ME_GENERATE_64_BYTE_SECRET

# Token expiration (in minutes)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# =============================================================================
# RATE LIMITING
# =============================================================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=30
RATE_LIMIT_WINDOW_SECONDS=60

# =============================================================================
# UPLOAD SETTINGS
# =============================================================================

# Maximum concurrent uploads
UPLOAD_CONCURRENCY_LIMIT=10

# Max file size in bytes (5MB default)
MAX_FILE_SIZE_BYTES=5242880

# =============================================================================
# AI PROVIDER (Phase 5 - Auto-Tagging)
# =============================================================================

# AI Provider: "mock" (free), "openai" (paid), or "google" (paid)
AI_PROVIDER=openai

# OpenAI API Key - stored in GitHub Secrets, injected during deployment
# Get your key from: https://platform.openai.com/api-keys
# NOTE: This value is injected from GitHub Secrets during CD deployment
OPENAI_API_KEY=INJECTED_FROM_GITHUB_SECRETS

# AI Provider Settings
AI_MAX_TAGS_PER_IMAGE=5
AI_CONFIDENCE_THRESHOLD=70
OPENAI_VISION_MODEL=gpt-4o-mini

# =============================================================================
# OPTIONAL: EXTERNAL ACCESS (for debugging only)
# =============================================================================
# Uncomment to expose service ports on host (NOT recommended for production)
# EXPOSE_POSTGRES_PORT=5433
# EXPOSE_MINIO_API_PORT=9002
# EXPOSE_MINIO_CONSOLE_PORT=9003
# EXPOSE_REDIS_PORT=6380
